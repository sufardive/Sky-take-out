# 苍穹外卖

## DAY1

 ### 环境搭建

#### 软件开发主要流程

##### 软件流程

需求分析 -> 设计 ->  编码 -> 测试 -> 上线运维

##### 软件环境

1. 开发环境
2. 测试环境
3. 生产环境

#### 项目介绍

##### 项目介绍

这东西是做什么的

##### 功能架构

对应的端是需要什么功能

##### 技术选型

选择什么而样的技术

#### 环境搭建

##### 前端环境搭建

需要nginx（非中文路径）这个东西会有前端工程的环境，运行一下

1. 不能有中文目录
2. 缺少temp文件

直接点击exe文件就跑了

##### 后端环境搭建

###### 基于macven

直接使用idea打开即可开启工程

take-out:maven管理

common：公共类

pojo:实体类，vo,dto

server:后端服务

##### GIT管理代码

1. 创建本地仓库

   In VSC, press CGR Then find the project root and click “OK”. After that, the local Git repository will be created successfully. Then, you can commit files and submit them into the local repository.

2. 创建远程仓库

   open gitee

   create factory chose private and the copy url

3. 推送到远程仓库

   In the Git panel (usually indicated by a green icon), you can choose a URL and then select a remote branch. After that, when you go back to Gitee, you can find that the repository has been created successfully.

##### database

Create a database directly using SQL.

##### 后端搭建

从lifecycle compile进行编译，编译完成就可以启动了

##### 断点调试

Debug:在获取数据的地方断点可以检测自己获得数据

F6单步进行，F8一直运行到下个断点

handers:异常处理器！

###### JWT令牌

使用相关的注解封装进进去，然后注入进行配置

###### 前端后端联动

前后端地址并不同，实现联动是由nginx反向代理转发到后端服务器

##### NGINX

nginx.conf![2025-01-10_201528](D:\Screen\2025-01-10_201528.png)

##### 负载均衡![2025-01-10_201645](D:\Screen\2025-01-10_201645.png)



##### 登录功能实现

###### MD5加密

```  java
password = DigestUtils.md5DigestAsHex(password.getBytes());
```



#### 导入接口文档![2025-01-10_203150](D:\Screen\2025-01-10_203150.png)

###### YAapi

1. 把管理端和用户端的json进入YAapi，两个项目
2. 导入：数据管理->导入json->数据同步

#### Swagger

##### 帮助后端生成接口文档并进行测验!

```java
<dependency>
            <groupId>com.github.xiaoymin</groupId>
            <artifactId>knife4j-spring-boot-starter</artifactId>
            <version>3.0.2</version>
        </dependency>
```



```java
    /**
     * 通过knife4j生成接口文档
     * @return
     */
    @Bean
    public Docket docket() {
        ApiInfo apiInfo = new ApiInfoBuilder()
                .title("苍穹外卖项目接口文档")
                .version("2.0")
                .description("苍穹外卖项目接口文档")
                .build();
        Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(apiInfo)
                .select()
                .apis(RequestHandlerSelectors.basePackage("com.sky.controller"))
                .paths(PathSelectors.any())
                .build();
        return docket;
    }

    /**
     * 设置静态资源映射
     * @param registry
     */
    protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/doc.html").addResourceLocations("classpath:/META-INF/resources/");
        registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");
    }
}
```





可以通过doc.html访问对应的网站查看文档

##### 常用注解

 ![2025-01-10_205428](D:\Screen\2025-01-10_205428.png)

@Api：对类的说明

@ApiOperation:说明方法的用途

@ApiModel:在类上描述entity、DTO、VO

@ApiModelProperty：描述属性信息

## Day2

### 新增员工

#### 需求分析和设计

##### 设计接口

1.  数据为看到的表单项
2. 所有数据会为Result返回
3. 约定　

#### 代码开发

1. 设计DTO

   ![2025-01-11_071546](D:\Screen\2025-01-11_071546.png)

   1. 写一个方法给员工接口，自体需要注解，还有POSTMAPPING以及API注解

```java

```



2.  创建Service的方法
3. 实现方法
4. 在service仍然需要entity
5. 转化的时候可以用BeanUtils进行属性拷贝
6. 其他没有的自己设置

#### 功能测试
##### 接口文档

1. 直接在doc.html测试
2. 注意需要JWT令牌校验
3. 通过登录获得令牌，在文档管理->参数设置把taken设置上

##### 前后端联调

1. 直接在前端调试

#### 完善

1. ##### 存在名字重复

   handler里设置异常管理

2. ##### 未设置id

   1. 从token动态获取ID
   2. 使用ThreadLocal方法可以获得线程ID
   3. 在JWT哪里可以获得ID

### 分页查询

查询一般用GET

#### 代码开发

1. 设计DTO接收前端发来的代码
2. 分页同一封装为PageResult
3. 返回给前端则需要用Result返回

代码编写

1. controller设置方法，明确返回的泛型pageResult可以直接找到,json需要自体，这个不用

2. 相关注解

3. 设置service

   1. 基本原理是数据库查询多少条（在于数据库语句”limit“）

   2. 插件来咯！pagehelper

      ```java
      
      ```

      

4. 返回success封装需求的对象

5. 设置mapper

   1. 因为使用插件，返回值固定为page的employee泛型

   2. 此处为动态SQL，找到xml映射文件

      ```java
      
      ```

6. 在service给result赋值返回构造

###### 完善分页功能

1. 属性上加注解

   ```java
   @jasofrmate
   ```

   

2. 配置中扩展SpringMVC 消息转换器

   重写

   ```java
   extendMess
    //create convert
       
    //create jacksonobjectmapper
    
    //add convert in converts,keeping zero
          
   ```

   

### 启用禁止员工账号

### 编辑员工

### 导入分类模块

